// build time:Mon May 28 2018 17:16:16 GMT+0800 (CST)
var Post=function(){function e(t,n){this.forbid_request=false;try{AV.init({appId:t|"",appKey:n|""})}catch(o){if(!n){this.forbid_request=true}}var i=function(e,t){var n=AV.Object.extend("Visit");var o=new n;o.set("url",e);o.set("ip",t);o.save().then(function(e){console.log(e)},function(e){console.log(e)})};e.prototype.getCommentCount=function(e,t){if(this.forbid_request)return;var n=new AV.Query("Comment");n.equalTo("url",e);n.count().then(t,function(e){})};e.prototype.addVisitRecord=function(e,t){if(this.forbid_request)return;var n=new AV.Query("Visit");n.equalTo("url",e).equalTo("ip",t);n.count().then(function(n){if(n==0){i(e,t)}else{console.log(t+" already visited")}},function(n){i(e,t)})};e.prototype.getVisitCount=function(e,t){if(this.forbid_request)return;var n=new AV.Query("Visit");n.equalTo("url",e);n.count().then(t,function(e){})};e.prototype.getPostVersion=function(e){var t=document.getElementById(e).dataset["name"];var n=Cookies.getJSON(t);if(n==undefined){return undefined}else{return n["last_visited_version"]}};var r=function(e,t){Cookies.set(e,{last_visited_version:t},{domain:window.location.hostname,expires:365*3})};e.prototype.updatePostVersion=function(e){var t=document.getElementById(e);r(t.dataset["name"],t.dataset["version"])};e.prototype.checkUpdate=function(t,n){var o=e.prototype.getPostVersion(t)|0;var i=document.getElementById(t).dataset["version"];var r=false;if(i==-1){r=false}if(o==undefined){r=true}if(i>o){r=true}else{r=false}n(t,r)}}return e}();
//rebuild by neat 
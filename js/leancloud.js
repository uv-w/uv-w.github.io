// build time:Mon May 28 2018 17:16:16 GMT+0800 (CST)
var LeanCloud=function(){var e;var t;var n;var o=function(e,t){this.forbid_request=false;try{AV.init({appId:e|"",appKey:t|""})}catch(n){if(!t){this.forbid_request=true}}var o=function(e,t){var n=AV.Object.extend("Visit");var o=new n;o.set("url",e);o.set("ip",t);o.save().then(function(e){console.log(e)},function(e){console.log(e)})};this.addVisitRecord=function(e,t){if(this.forbid_request)return;var n=new AV.Query("Visit");n.equalTo("url",e).equalTo("ip",t);n.count().then(function(n){if(n==0){o(e,t)}else{console.log(t+" already visited")}},function(n){o(e,t)})};this.getCommentCount=function(e,t){var n=Cookies.get("COMMENT_COUNT_hashit_"+(new Hashes.SHA256).hex(e))|0;t(n);setInterval(function(){var n=Cookies.get("COMMENT_COUNT_hashit_"+(new Hashes.SHA256).hex(e))|0;t(n)},3*1e3)};this.getVisitCount=function(e,t){var n=Cookies.get("VISIT_COUNT_hashit_"+(new Hashes.SHA256).hex(e))|0;t(n);setInterval(function(){var n=Cookies.get("VISIT_COUNT_hashit_"+(new Hashes.SHA256).hex(e))|0;t(n)},3*1e3)};this.fetchCommentCount=function(e){setTimeout(function(){if(this.forbid_request){console.log("LeanCloud request is forbidden because the object is not initialized correctly");return}var t=new AV.Query("Comment");t.equalTo("url",e);t.count().then(function(t){Cookies.set("COMMENT_COUNT_hashit_"+(new Hashes.SHA256).hex(e),t)},function(t){console.log("error"+t+" when query Comment count for "+e)})},Math.random()*2e3)};this.fetchVisitCount=function(e){setTimeout(function(){if(this.forbid_request)return;var t=new AV.Query("Visit");t.equalTo("url",e);t.count().then(function(t){Cookies.set("VISIT_COUNT_hashit_"+(new Hashes.SHA256).hex(e),t)},function(t){console.log("error"+t+" when query Visit count for "+e)})},Math.random()*2e3)}};function i(){var e=new o(t,n);return e}return{getInstance:function(){if(!e){e=i()}return e},init:function(e,o){t=e;n=o}}}();
//rebuild by neat 
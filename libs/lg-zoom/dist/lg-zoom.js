// build time:Mon May 28 2018 17:16:17 GMT+0800 (CST)
(function(e,o){if(typeof define==="function"&&define.amd){define(["jquery"],function(e){return o(e)})}else if(typeof exports==="object"){module.exports=o(require("jquery"))}else{o(jQuery)}})(this,function(e){(function(){"use strict";var o=function(){var e=false;var o=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(o&&parseInt(o[2],10)<54){e=true}return e};var t={scale:1,zoom:true,actualSize:true,enableZoomAfter:300,useLeftForZoom:o()};var a=function(o){this.core=e(o).data("lightGallery");this.core.s=e.extend({},t,this.core.s);if(this.core.s.zoom&&this.core.doCss()){this.init();this.zoomabletimeout=false;this.pageX=e(window).width()/2;this.pageY=e(window).height()/2+e(window).scrollTop()}return this};a.prototype.init=function(){var o=this;var t='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';if(o.core.s.actualSize){t+='<span id="lg-actual-size" class="lg-icon"></span>'}if(o.core.s.useLeftForZoom){o.core.$outer.addClass("lg-use-left-for-zoom")}else{o.core.$outer.addClass("lg-use-transition-for-zoom")}this.core.$outer.find(".lg-toolbar").append(t);o.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(t,a,r){var i=o.core.s.enableZoomAfter+r;if(e("body").hasClass("lg-from-hash")&&r){i=0}else{e("body").removeClass("lg-from-hash")}o.zoomabletimeout=setTimeout(function(){o.core.$slide.eq(a).addClass("lg-zoomable")},i+30)});var a=1;var r=function(t){var a=o.core.$outer.find(".lg-current .lg-image");var r;var i;var s=(e(window).width()-a.prop("offsetWidth"))/2;var l=(e(window).height()-a.prop("offsetHeight"))/2+e(window).scrollTop();r=o.pageX-s;i=o.pageY-l;var n=(t-1)*r;var c=(t-1)*i;a.css("transform","scale3d("+t+", "+t+", 1)").attr("data-scale",t);if(o.core.s.useLeftForZoom){a.parent().css({left:-n+"px",top:-c+"px"}).attr("data-x",n).attr("data-y",c)}else{a.parent().css("transform","translate3d(-"+n+"px, -"+c+"px, 0)").attr("data-x",n).attr("data-y",c)}};var i=function(){if(a>1){o.core.$outer.addClass("lg-zoomed")}else{o.resetZoom()}if(a<1){a=1}r(a)};var s=function(t,r,s,l){var n=r.prop("offsetWidth");var c;if(o.core.s.dynamic){c=o.core.s.dynamicEl[s].width||r[0].naturalWidth||n}else{c=o.core.$items.eq(s).attr("data-width")||r[0].naturalWidth||n}var f;if(o.core.$outer.hasClass("lg-zoomed")){a=1}else{if(c>n){f=c/n;a=f||2}}if(l){o.pageX=e(window).width()/2;o.pageY=e(window).height()/2+e(window).scrollTop()}else{o.pageX=t.pageX||t.originalEvent.targetTouches[0].pageX;o.pageY=t.pageY||t.originalEvent.targetTouches[0].pageY}i();setTimeout(function(){o.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)};var l=false;o.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(e,t){var a=o.core.$slide.eq(t).find(".lg-image");a.on("dblclick",function(e){s(e,a,t)});a.on("touchstart",function(e){if(!l){l=setTimeout(function(){l=null},300)}else{clearTimeout(l);l=null;s(e,a,t)}e.preventDefault()})});e(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){o.pageX=e(window).width()/2;o.pageY=e(window).height()/2+e(window).scrollTop();r(a)});e("#lg-zoom-out").on("click.lg",function(){if(o.core.$outer.find(".lg-current .lg-image").length){a-=o.core.s.scale;i()}});e("#lg-zoom-in").on("click.lg",function(){if(o.core.$outer.find(".lg-current .lg-image").length){a+=o.core.s.scale;i()}});e("#lg-actual-size").on("click.lg",function(e){s(e,o.core.$slide.eq(o.core.index).find(".lg-image"),o.core.index,true)});o.core.$el.on("onBeforeSlide.lg.tm",function(){a=1;o.resetZoom()});o.zoomDrag();o.zoomSwipe()};a.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed");this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y");this.core.$slide.find(".lg-image").removeAttr("style data-scale");this.pageX=e(window).width()/2;this.pageY=e(window).height()/2+e(window).scrollTop()};a.prototype.zoomSwipe=function(){var e=this;var o={};var t={};var a=false;var r=false;var i=false;e.core.$slide.on("touchstart.lg",function(t){if(e.core.$outer.hasClass("lg-zoomed")){var a=e.core.$slide.eq(e.core.index).find(".lg-object");i=a.prop("offsetHeight")*a.attr("data-scale")>e.core.$outer.find(".lg").height();r=a.prop("offsetWidth")*a.attr("data-scale")>e.core.$outer.find(".lg").width();if(r||i){t.preventDefault();o={x:t.originalEvent.targetTouches[0].pageX,y:t.originalEvent.targetTouches[0].pageY}}}});e.core.$slide.on("touchmove.lg",function(s){if(e.core.$outer.hasClass("lg-zoomed")){var l=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");var n;var c;s.preventDefault();a=true;t={x:s.originalEvent.targetTouches[0].pageX,y:s.originalEvent.targetTouches[0].pageY};e.core.$outer.addClass("lg-zoom-dragging");if(i){c=-Math.abs(l.attr("data-y"))+(t.y-o.y)}else{c=-Math.abs(l.attr("data-y"))}if(r){n=-Math.abs(l.attr("data-x"))+(t.x-o.x)}else{n=-Math.abs(l.attr("data-x"))}if(Math.abs(t.x-o.x)>15||Math.abs(t.y-o.y)>15){if(e.core.s.useLeftForZoom){l.css({left:n+"px",top:c+"px"})}else{l.css("transform","translate3d("+n+"px, "+c+"px, 0)")}}}});e.core.$slide.on("touchend.lg",function(){if(e.core.$outer.hasClass("lg-zoomed")){if(a){a=false;e.core.$outer.removeClass("lg-zoom-dragging");e.touchendZoom(o,t,r,i)}}})};a.prototype.zoomDrag=function(){var o=this;var t={};var a={};var r=false;var i=false;var s=false;var l=false;o.core.$slide.on("mousedown.lg.zoom",function(a){var i=o.core.$slide.eq(o.core.index).find(".lg-object");l=i.prop("offsetHeight")*i.attr("data-scale")>o.core.$outer.find(".lg").height();s=i.prop("offsetWidth")*i.attr("data-scale")>o.core.$outer.find(".lg").width();if(o.core.$outer.hasClass("lg-zoomed")){if(e(a.target).hasClass("lg-object")&&(s||l)){a.preventDefault();t={x:a.pageX,y:a.pageY};r=true;o.core.$outer.scrollLeft+=1;o.core.$outer.scrollLeft-=1;o.core.$outer.removeClass("lg-grab").addClass("lg-grabbing")}}});e(window).on("mousemove.lg.zoom",function(e){if(r){var n=o.core.$slide.eq(o.core.index).find(".lg-img-wrap");var c;var f;i=true;a={x:e.pageX,y:e.pageY};o.core.$outer.addClass("lg-zoom-dragging");if(l){f=-Math.abs(n.attr("data-y"))+(a.y-t.y)}else{f=-Math.abs(n.attr("data-y"))}if(s){c=-Math.abs(n.attr("data-x"))+(a.x-t.x)}else{c=-Math.abs(n.attr("data-x"))}if(o.core.s.useLeftForZoom){n.css({left:c+"px",top:f+"px"})}else{n.css("transform","translate3d("+c+"px, "+f+"px, 0)")}}});e(window).on("mouseup.lg.zoom",function(e){if(r){r=false;o.core.$outer.removeClass("lg-zoom-dragging");if(i&&(t.x!==a.x||t.y!==a.y)){a={x:e.pageX,y:e.pageY};o.touchendZoom(t,a,s,l)}i=false}o.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})};a.prototype.touchendZoom=function(e,o,t,a){var r=this;var i=r.core.$slide.eq(r.core.index).find(".lg-img-wrap");var s=r.core.$slide.eq(r.core.index).find(".lg-object");var l=-Math.abs(i.attr("data-x"))+(o.x-e.x);var n=-Math.abs(i.attr("data-y"))+(o.y-e.y);var c=(r.core.$outer.find(".lg").height()-s.prop("offsetHeight"))/2;var f=Math.abs(s.prop("offsetHeight")*Math.abs(s.attr("data-scale"))-r.core.$outer.find(".lg").height()+c);var d=(r.core.$outer.find(".lg").width()-s.prop("offsetWidth"))/2;var g=Math.abs(s.prop("offsetWidth")*Math.abs(s.attr("data-scale"))-r.core.$outer.find(".lg").width()+d);if(Math.abs(o.x-e.x)>15||Math.abs(o.y-e.y)>15){if(a){if(n<=-f){n=-f}else if(n>=-c){n=-c}}if(t){if(l<=-g){l=-g}else if(l>=-d){l=-d}}if(a){i.attr("data-y",Math.abs(n))}else{n=-Math.abs(i.attr("data-y"))}if(t){i.attr("data-x",Math.abs(l))}else{l=-Math.abs(i.attr("data-x"))}if(r.core.s.useLeftForZoom){i.css({left:l+"px",top:n+"px"})}else{i.css("transform","translate3d("+l+"px, "+n+"px, 0)")}}};a.prototype.destroy=function(){var o=this;o.core.$el.off(".lg.zoom");e(window).off(".lg.zoom");o.core.$slide.off(".lg.zoom");o.core.$el.off(".lg.tm.zoom");o.resetZoom();clearTimeout(o.zoomabletimeout);o.zoomabletimeout=false};e.fn.lightGallery.modules.zoom=a})()});
//rebuild by neat 
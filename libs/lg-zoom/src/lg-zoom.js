// build time:Mon May 28 2018 17:16:17 GMT+0800 (CST)
(function(){"use strict";var e=function(){var e=false;var o=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(o&&parseInt(o[2],10)<54){e=true}return e};var o={scale:1,zoom:true,actualSize:true,enableZoomAfter:300,useLeftForZoom:e()};var t=function(e){this.core=$(e).data("lightGallery");this.core.s=$.extend({},o,this.core.s);if(this.core.s.zoom&&this.core.doCss()){this.init();this.zoomabletimeout=false;this.pageX=$(window).width()/2;this.pageY=$(window).height()/2+$(window).scrollTop()}return this};t.prototype.init=function(){var e=this;var o='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';if(e.core.s.actualSize){o+='<span id="lg-actual-size" class="lg-icon"></span>'}if(e.core.s.useLeftForZoom){e.core.$outer.addClass("lg-use-left-for-zoom")}else{e.core.$outer.addClass("lg-use-transition-for-zoom")}this.core.$outer.find(".lg-toolbar").append(o);e.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(o,t,a){var r=e.core.s.enableZoomAfter+a;if($("body").hasClass("lg-from-hash")&&a){r=0}else{$("body").removeClass("lg-from-hash")}e.zoomabletimeout=setTimeout(function(){e.core.$slide.eq(t).addClass("lg-zoomable")},r+30)});var t=1;var a=function(o){var t=e.core.$outer.find(".lg-current .lg-image");var a;var r;var s=($(window).width()-t.prop("offsetWidth"))/2;var i=($(window).height()-t.prop("offsetHeight"))/2+$(window).scrollTop();a=e.pageX-s;r=e.pageY-i;var l=(o-1)*a;var n=(o-1)*r;t.css("transform","scale3d("+o+", "+o+", 1)").attr("data-scale",o);if(e.core.s.useLeftForZoom){t.parent().css({left:-l+"px",top:-n+"px"}).attr("data-x",l).attr("data-y",n)}else{t.parent().css("transform","translate3d(-"+l+"px, -"+n+"px, 0)").attr("data-x",l).attr("data-y",n)}};var r=function(){if(t>1){e.core.$outer.addClass("lg-zoomed")}else{e.resetZoom()}if(t<1){t=1}a(t)};var s=function(o,a,s,i){var l=a.prop("offsetWidth");var n;if(e.core.s.dynamic){n=e.core.s.dynamicEl[s].width||a[0].naturalWidth||l}else{n=e.core.$items.eq(s).attr("data-width")||a[0].naturalWidth||l}var c;if(e.core.$outer.hasClass("lg-zoomed")){t=1}else{if(n>l){c=n/l;t=c||2}}if(i){e.pageX=$(window).width()/2;e.pageY=$(window).height()/2+$(window).scrollTop()}else{e.pageX=o.pageX||o.originalEvent.targetTouches[0].pageX;e.pageY=o.pageY||o.originalEvent.targetTouches[0].pageY}r();setTimeout(function(){e.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)};var i=false;e.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(o,t){var a=e.core.$slide.eq(t).find(".lg-image");a.on("dblclick",function(e){s(e,a,t)});a.on("touchstart",function(e){if(!i){i=setTimeout(function(){i=null},300)}else{clearTimeout(i);i=null;s(e,a,t)}e.preventDefault()})});$(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){e.pageX=$(window).width()/2;e.pageY=$(window).height()/2+$(window).scrollTop();a(t)});$("#lg-zoom-out").on("click.lg",function(){if(e.core.$outer.find(".lg-current .lg-image").length){t-=e.core.s.scale;r()}});$("#lg-zoom-in").on("click.lg",function(){if(e.core.$outer.find(".lg-current .lg-image").length){t+=e.core.s.scale;r()}});$("#lg-actual-size").on("click.lg",function(o){s(o,e.core.$slide.eq(e.core.index).find(".lg-image"),e.core.index,true)});e.core.$el.on("onBeforeSlide.lg.tm",function(){t=1;e.resetZoom()});e.zoomDrag();e.zoomSwipe()};t.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed");this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y");this.core.$slide.find(".lg-image").removeAttr("style data-scale");this.pageX=$(window).width()/2;this.pageY=$(window).height()/2+$(window).scrollTop()};t.prototype.zoomSwipe=function(){var e=this;var o={};var t={};var a=false;var r=false;var s=false;e.core.$slide.on("touchstart.lg",function(t){if(e.core.$outer.hasClass("lg-zoomed")){var a=e.core.$slide.eq(e.core.index).find(".lg-object");s=a.prop("offsetHeight")*a.attr("data-scale")>e.core.$outer.find(".lg").height();r=a.prop("offsetWidth")*a.attr("data-scale")>e.core.$outer.find(".lg").width();if(r||s){t.preventDefault();o={x:t.originalEvent.targetTouches[0].pageX,y:t.originalEvent.targetTouches[0].pageY}}}});e.core.$slide.on("touchmove.lg",function(i){if(e.core.$outer.hasClass("lg-zoomed")){var l=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");var n;var c;i.preventDefault();a=true;t={x:i.originalEvent.targetTouches[0].pageX,y:i.originalEvent.targetTouches[0].pageY};e.core.$outer.addClass("lg-zoom-dragging");if(s){c=-Math.abs(l.attr("data-y"))+(t.y-o.y)}else{c=-Math.abs(l.attr("data-y"))}if(r){n=-Math.abs(l.attr("data-x"))+(t.x-o.x)}else{n=-Math.abs(l.attr("data-x"))}if(Math.abs(t.x-o.x)>15||Math.abs(t.y-o.y)>15){if(e.core.s.useLeftForZoom){l.css({left:n+"px",top:c+"px"})}else{l.css("transform","translate3d("+n+"px, "+c+"px, 0)")}}}});e.core.$slide.on("touchend.lg",function(){if(e.core.$outer.hasClass("lg-zoomed")){if(a){a=false;e.core.$outer.removeClass("lg-zoom-dragging");e.touchendZoom(o,t,r,s)}}})};t.prototype.zoomDrag=function(){var e=this;var o={};var t={};var a=false;var r=false;var s=false;var i=false;e.core.$slide.on("mousedown.lg.zoom",function(t){var r=e.core.$slide.eq(e.core.index).find(".lg-object");i=r.prop("offsetHeight")*r.attr("data-scale")>e.core.$outer.find(".lg").height();s=r.prop("offsetWidth")*r.attr("data-scale")>e.core.$outer.find(".lg").width();if(e.core.$outer.hasClass("lg-zoomed")){if($(t.target).hasClass("lg-object")&&(s||i)){t.preventDefault();o={x:t.pageX,y:t.pageY};a=true;e.core.$outer.scrollLeft+=1;e.core.$outer.scrollLeft-=1;e.core.$outer.removeClass("lg-grab").addClass("lg-grabbing")}}});$(window).on("mousemove.lg.zoom",function(l){if(a){var n=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");var c;var d;r=true;t={x:l.pageX,y:l.pageY};e.core.$outer.addClass("lg-zoom-dragging");if(i){d=-Math.abs(n.attr("data-y"))+(t.y-o.y)}else{d=-Math.abs(n.attr("data-y"))}if(s){c=-Math.abs(n.attr("data-x"))+(t.x-o.x)}else{c=-Math.abs(n.attr("data-x"))}if(e.core.s.useLeftForZoom){n.css({left:c+"px",top:d+"px"})}else{n.css("transform","translate3d("+c+"px, "+d+"px, 0)")}}});$(window).on("mouseup.lg.zoom",function(l){if(a){a=false;e.core.$outer.removeClass("lg-zoom-dragging");if(r&&(o.x!==t.x||o.y!==t.y)){t={x:l.pageX,y:l.pageY};e.touchendZoom(o,t,s,i)}r=false}e.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})};t.prototype.touchendZoom=function(e,o,t,a){var r=this;var s=r.core.$slide.eq(r.core.index).find(".lg-img-wrap");var i=r.core.$slide.eq(r.core.index).find(".lg-object");var l=-Math.abs(s.attr("data-x"))+(o.x-e.x);var n=-Math.abs(s.attr("data-y"))+(o.y-e.y);var c=(r.core.$outer.find(".lg").height()-i.prop("offsetHeight"))/2;var d=Math.abs(i.prop("offsetHeight")*Math.abs(i.attr("data-scale"))-r.core.$outer.find(".lg").height()+c);var f=(r.core.$outer.find(".lg").width()-i.prop("offsetWidth"))/2;var g=Math.abs(i.prop("offsetWidth")*Math.abs(i.attr("data-scale"))-r.core.$outer.find(".lg").width()+f);if(Math.abs(o.x-e.x)>15||Math.abs(o.y-e.y)>15){if(a){if(n<=-d){n=-d}else if(n>=-c){n=-c}}if(t){if(l<=-g){l=-g}else if(l>=-f){l=-f}}if(a){s.attr("data-y",Math.abs(n))}else{n=-Math.abs(s.attr("data-y"))}if(t){s.attr("data-x",Math.abs(l))}else{l=-Math.abs(s.attr("data-x"))}if(r.core.s.useLeftForZoom){s.css({left:l+"px",top:n+"px"})}else{s.css("transform","translate3d("+l+"px, "+n+"px, 0)")}}};t.prototype.destroy=function(){var e=this;e.core.$el.off(".lg.zoom");$(window).off(".lg.zoom");e.core.$slide.off(".lg.zoom");e.core.$el.off(".lg.tm.zoom");e.resetZoom();clearTimeout(e.zoomabletimeout);e.zoomabletimeout=false};$.fn.lightGallery.modules.zoom=t})();
//rebuild by neat 
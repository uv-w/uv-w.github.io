// build time:Mon May 28 2018 17:16:19 GMT+0800 (CST)
"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function e(e,t){var n=[];var i=true;var r=false;var a=undefined;try{for(var o=e[Symbol.iterator](),m;!(i=(m=o.next()).done);i=true){n.push(m.value);if(t&&n.length===t)break}}catch(l){r=true;a=l}finally{try{if(!i&&o["return"])o["return"]()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _icons=require("../icons");var _constants=require("../constants");function renderHeader(e,t){var n=e.meta,i=e.user,r=e.reactions;var a=document.createElement("div");a.lang="en-US";a.className="gitment-container gitment-header-container";var o=document.createElement("span");var m=r.find(function(e){return e.content==="heart"&&e.user.login===i.login});o.className="gitment-header-like-btn";o.innerHTML="\n    "+_icons.heart+"\n    "+(m?"Unlike":"Like")+"\n    "+(n.reactions&&n.reactions.heart?" • <strong>"+n.reactions.heart+"</strong> Liked":"")+"\n  ";if(m){o.classList.add("liked");o.onclick=function(){return t.unlike()}}else{o.classList.remove("liked");o.onclick=function(){return t.like()}}a.appendChild(o);var l=document.createElement("span");l.innerHTML="\n    "+(n.comments?" • <strong>"+n.comments+"</strong> Comments":"")+"\n  ";a.appendChild(l);var s=document.createElement("a");s.className="gitment-header-issue-link";s.href=n.html_url;s.target="_blank";s.innerText="Issue Page";a.appendChild(s);return a}function renderComments(e,t){var n=e.meta,i=e.comments,r=e.commentReactions,a=e.currentPage,o=e.user,m=e.error;var l=document.createElement("div");l.lang="en-US";l.className="gitment-container gitment-comments-container";if(m){var s=document.createElement("div");s.className="gitment-comments-error";if(m===_constants.NOT_INITIALIZED_ERROR&&o.login&&o.login.toLowerCase()===t.owner.toLowerCase()){var c=document.createElement("div");var d=document.createElement("button");d.className="gitment-comments-init-btn";d.onclick=function(){d.setAttribute("disabled",true);t.init().catch(function(e){d.removeAttribute("disabled");alert(e)})};d.innerText="Initialize Comments";c.appendChild(d);s.appendChild(c)}else{s.innerText=m}l.appendChild(s);return l}else if(i===undefined){var g=document.createElement("div");g.innerText="Loading comments...";g.className="gitment-comments-loading";l.appendChild(g);return l}else if(!i.length){var u=document.createElement("div");u.className="gitment-comments-empty";u.innerText="No Comment Yet";l.appendChild(u);return l}var v=document.createElement("ul");v.className="gitment-comments-list";i.forEach(function(e){var n=new Date(e.created_at);var i=new Date(e.updated_at);var a=document.createElement("li");a.className="gitment-comment";a.innerHTML='\n      <a class="gitment-comment-avatar" href="'+e.user.html_url+'" target="_blank">\n        <img class="gitment-comment-avatar-img" src="'+e.user.avatar_url+'"/>\n      </a>\n      <div class="gitment-comment-main">\n        <div class="gitment-comment-header">\n          <a class="gitment-comment-name" href="'+e.user.html_url+'" target="_blank">\n            '+e.user.login+'\n          </a>\n          commented on\n          <span title="'+n+'">'+n.toDateString()+"</span>\n          "+(n.toString()!==i.toString()?' • <span title="comment was edited at '+i+'">edited</span>':"")+'\n          <div class="gitment-comment-like-btn">'+_icons.heart+" "+(e.reactions.heart||"")+'</div>\n        </div>\n        <div class="gitment-comment-body gitment-markdown">'+e.body_html+"</div>\n      </div>\n    ";var m=a.querySelector(".gitment-comment-like-btn");var l=r[e.id]&&r[e.id].find(function(e){return e.content==="heart"&&e.user.login===o.login});if(l){m.classList.add("liked");m.onclick=function(){return t.unlikeAComment(e.id)}}else{m.classList.remove("liked");m.onclick=function(){return t.likeAComment(e.id)}}var s=document.createElement("img");var c=a.querySelector(".gitment-comment-body");s.className="gitment-hidden";s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";s.onload=function(){if(c.clientHeight>t.maxCommentHeight){c.classList.add("gitment-comment-body-folded");c.style.maxHeight=t.maxCommentHeight+"px";c.title="Click to Expand";c.onclick=function(){c.classList.remove("gitment-comment-body-folded");c.style.maxHeight="";c.title="";c.onclick=null}}};a.appendChild(s);v.appendChild(a)});l.appendChild(v);if(n){var h=Math.ceil(n.comments/t.perPage);if(h>1){var f=document.createElement("ul");f.className="gitment-comments-pagination";if(a>1){var p=document.createElement("li");p.className="gitment-comments-page-item";p.innerText="Previous";p.onclick=function(){return t.goto(a-1)};f.appendChild(p)}var b=function L(e){var n=document.createElement("li");n.className="gitment-comments-page-item";n.innerText=e;n.onclick=function(){return t.goto(e)};if(a===e)n.classList.add("gitment-selected");f.appendChild(n)};for(var k=1;k<=h;k++){b(k)}if(a<h){var C=document.createElement("li");C.className="gitment-comments-page-item";C.innerText="Next";C.onclick=function(){return t.goto(a+1)};f.appendChild(C)}l.appendChild(f)}}return l}function renderEditor(e,t){var n=e.user,i=e.error;var r=document.createElement("div");r.lang="en-US";r.className="gitment-container gitment-editor-container";var a=n.login&&!i?"":"disabled";var o=n.login?"":"Login to Comment";r.innerHTML="\n      "+(n.login?'<a class="gitment-editor-avatar" href="'+n.html_url+'" target="_blank">\n            <img class="gitment-editor-avatar-img" src="'+n.avatar_url+'"/>\n          </a>':n.isLoggingIn?'<div class="gitment-editor-avatar">'+_icons.spinner+"</div>":'<a class="gitment-editor-avatar" href="'+t.loginLink+'" title="login with GitHub">\n              '+_icons.github+"\n            </a>")+'\n    </a>\n    <div class="gitment-editor-main">\n      <div class="gitment-editor-header">\n        <nav class="gitment-editor-tabs">\n          <button class="gitment-editor-tab gitment-selected">Write</button>\n          <button class="gitment-editor-tab">Preview</button>\n        </nav>\n        <div class="gitment-editor-login">\n          '+(n.login?'<a class="gitment-editor-logout-link">Logout</a>':n.isLoggingIn?"Logging in...":'<a class="gitment-editor-login-link" href="'+t.loginLink+'">Login</a> with GitHub')+'\n        </div>\n      </div>\n      <div class="gitment-editor-body">\n        <div class="gitment-editor-write-field">\n          <textarea placeholder="Leave a comment" title="'+o+'" '+a+'></textarea>\n        </div>\n        <div class="gitment-editor-preview-field gitment-hidden">\n          <div class="gitment-editor-preview gitment-markdown"></div>\n        </div>\n      </div>\n    </div>\n    <div class="gitment-editor-footer">\n      <a class="gitment-editor-footer-tip" href="https://guides.github.com/features/mastering-markdown/" target="_blank">\n        Styling with Markdown is supported\n      </a>\n      <button class="gitment-editor-submit" title="'+o+'" '+a+">Comment</button>\n    </div>\n  ";if(n.login){r.querySelector(".gitment-editor-logout-link").onclick=function(){return t.logout()}}var m=r.querySelector(".gitment-editor-write-field");var l=r.querySelector(".gitment-editor-preview-field");var s=m.querySelector("textarea");s.oninput=function(){s.style.height="auto";var e=window.getComputedStyle(s,null);var t=parseInt(e.height,10);var n=s.clientHeight;var i=s.scrollHeight;if(n<i){s.style.height=t+i-n+"px"}};var c=r.querySelectorAll(".gitment-editor-tab"),d=_slicedToArray(c,2),g=d[0],u=d[1];g.onclick=function(){g.classList.add("gitment-selected");u.classList.remove("gitment-selected");m.classList.remove("gitment-hidden");l.classList.add("gitment-hidden");s.focus()};u.onclick=function(){u.classList.add("gitment-selected");g.classList.remove("gitment-selected");l.classList.remove("gitment-hidden");m.classList.add("gitment-hidden");var e=l.querySelector(".gitment-editor-preview");var n=s.value.trim();if(!n){e.innerText="Nothing to preview";return}e.innerText="Loading preview...";t.markdown(n).then(function(t){return e.innerHTML=t})};var v=r.querySelector(".gitment-editor-submit");v.onclick=function(){v.innerText="Submitting...";v.setAttribute("disabled",true);t.post(s.value.trim()).then(function(e){s.value="";s.style.height="auto";v.removeAttribute("disabled");v.innerText="Comment"}).catch(function(e){alert(e);v.removeAttribute("disabled");v.innerText="Comment"})};return r}function renderFooter(){var e=document.createElement("div");e.lang="en-US";e.className="gitment-container gitment-footer-container";e.innerHTML='\n    Powered by\n    <a class="gitment-footer-project-link" href="https://github.com/imsun/gitment" target="_blank">\n      Gitment\n    </a>\n  ';return e}function render(e,t){var n=document.createElement("div");n.lang="en-US";n.className="gitment-container gitment-root-container";n.appendChild(t.renderHeader(e,t));n.appendChild(t.renderComments(e,t));n.appendChild(t.renderEditor(e,t));n.appendChild(t.renderFooter(e,t));return n}exports.default={render:render,renderHeader:renderHeader,renderComments:renderComments,renderEditor:renderEditor,renderFooter:renderFooter};
//rebuild by neat 